# JSON data model transformation

The bulk of the work here is in describing how we want different object models
to map between one another.

# Steps:

Each datatype (owners, orgs, groups, packages) has its own data transformation
parameters.   For each data type the transformation starts with reading the
transformation configuration for that type (users, groups, organizations,
packages).  The transformation configuration file identifies things like:

* fields that are user generated vs autogenerated
* a user generated unique id field.
* fieldmapping paramaters identify auto-generated unique identifiers and user
  generated unique identifiers for the object type.  These values are used to
  translate auto-generated unique identifers on the source side their equivalents
  on the destination side
* specific user generated unique identifiers that should be skipped or ignored.
* auto-generated fields that must be included for updates
* default values
* custom transformations that should be applied based on datatype, when the
  transformation should be applied, and finally the name of the transformation
  method in the customtransformations.py transformer.

The package comes with transformation configurations used for BCDC in the folder
bcdc2bcdc_config. The script is set up to use the 'transformationConfig_newDataMOdel.json
config file by default.  To override create a new transformation config file,
put it in the bcdc2bcdc_config folder and define the environment variable
**CKAN_TRANSFORMATION_CONFIG**

The bcdc2bcdc script does the following:

* Source data is retrieved from the API.
* Destination data is retrieved from the API
* Data is used to create a DataSet Object.
* DataSet objects are compared, deltas are stored in a CKANDataSetDeltas object
* Deltas are fed to update object that performs the updates.
