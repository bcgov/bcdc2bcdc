# Overview

* This repository contains the code to allow for the migration of data between
  Two CKAN instances using only the CKAN Rest API.

# Considerations

* Some fields in CKAN are autogenerated.  Autogenerated fields cannot be used
  to determine if two objects are the same.
* relationships between two objects use autogenerated fields in some cases

# Approach.

## High Level

* Dataset objects are created for SRC and DEST
* Dataset objects are an encapsulation of CKAN Data and functionality that can
  be used for comparisons.
* When differences are detected a Delta object is created to manage the
  differences
* Delta Object is passed to Update object
* Update object, makes calls to Delta object to get data associated with different
  sorts of operations, having recieved the data sends it on to CKAN api for update
    * Add Data
    * Delete Data
    * Update Data.

## Getting Lower...

### Dataset Objects (CKANData.CKANDataSet)

* a wrapper for data returned by the CKAN API.
* Implement python built in comparisons. (__eq__, __ne__)
* Provide an abstract way to compare collections of data regardless of type, ie
  (users, groups, organizations, packages, resources).  All types use same code.
* Different types of data need to be configured differently.
* Datatypes configured in Transformation Configuration

### Transformation configuration (CKANTransform.TransformationConfig)

* Simple wrapper to extract pieces of information out of the transformation API
* Example:
   * user defined fields vs auto generated fields
   * mappings between user defined unique identifier and autogenerated unique identifiers
   * Specific fields that MUST be included in an update, that should come from
     the destination object being updated.
   * Required field default values if missing in source.

### Delta Objects (CKANData.CKANDataSetDeltas)

* Delta objects are created from Two Dataset objects, a source and dest
* Delta objects are containers to store the data structures needed to be sent to
  the CKAN API to ADD/DELETE/UPDATE

### Update Objects (CKANUpdate.CKANUpdate_abc)
* Update objects define a standard api.
* Different CKAN object types extend the base update class
* Update objects define the relationship between CKAN object types, and the CKAN
  Wrapper methods to perform different update operations (ADD|DELETE|UPDATE)
